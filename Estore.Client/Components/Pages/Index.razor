@page "/"
@using Core.DTOs
@using Estore.Client.Components.Pages.PageComponents
@rendermode InteractiveServer

<div class="container">

    <!-- App Bar -->
    
    <MudAppBar Color="Color.Primary" Fixed="true" Bottom="false">
        <MudText Typo="Typo.h6" Class="ml-2">Record Store</MudText>
        <MudIconButton Icon="@Icons.Material.Filled.Person" Edge="Edge.End" Color="Color.Inherit" Size="Size.Medium" OnClick=@(() => SelectContent("Login")) />
        <MudIconButton Icon="@Icons.Material.Filled.ShoppingCart" Edge="Edge.End" Color="Color.Inherit" OnClick="@ToggleOpen" Size="Size.Medium" />
    </MudAppBar>

    <!-- Content -->
    <div class="content" style="height: 100vh">
        @if (selectedContent == "Products")
        {
            <Products />
        }
        else if (selectedContent == "Login")
        {
            <Login />
        }
    </div>

    <!-- Footer -->

    @* <div class="footer">
        <Footer />
    </div> *@

    <footer class="bg-light p-1 text-center text-lg-start bg-body-tertiary text-muted fixed-bottom">
        <!-- Section: Links  -->
        <section>
            <div class="container text-center text-md-start mt-3">
                <!-- Grid row -->
                <div class="row mt-1">
                    <!-- Grid column -->
                    <div class="col-md-4 col-lg-4 col-xl-3 mx-auto mb-4">
                        <!-- Content -->
                        <h6 class="text-uppercase fw-bold mb-4">
                            <i class="fas fa-gem"></i>Record Store
                        </h6>
                        <p>
                            Here you can use rows and columns to organize your footer content. Lorem ipsum
                            dolor sit amet, consectetur adipisicing elit.
                        </p>
                    </div>
                    <!-- Grid column -->
                    <div class="col-md-2 col-lg-2 col-xl-2 mx-auto mb-4">
                        <!-- Links -->
                        <h6 class="text-uppercase fw-bold mb-4">
                            Products
                        </h6>
                        <MudButton Variant="Variant.Text" Size="Size.Small" OnClick=@(() => SelectContent("Products"))>CD</MudButton><br />
                        <MudButton Variant="Variant.Text" Size="Size.Small" OnClick=@(() => SelectContent("Products"))>Vinyl</MudButton><br />
                        <MudButton Variant="Variant.Text" Size="Size.Small" OnClick=@(() => SelectContent("Products"))>Casette</MudButton><br />
                    </div>
                    <!-- Grid column -->
                    <!-- Grid column -->
                    <div class="col-md-2 col-lg-2 col-xl-2 mx-auto mb-4">
                        <!-- Links -->
                        <h6 class="text-uppercase fw-bold mb-4">
                            Useful links
                        </h6>
                        <MudButton Variant="Variant.Text" Size="Size.Small" OnClick=@(() => SelectContent("Products"))>Pricing</MudButton><br />
                        <MudButton Variant="Variant.Text" Size="Size.Small" OnClick=@(() => SelectContent("Products"))>Settings</MudButton><br />
                        <MudButton Variant="Variant.Text" Size="Size.Small" OnClick=@(() => SelectContent("Products"))>Orders</MudButton><br />
                    </div>
                    <!-- Grid column -->
                    <!-- Grid column -->
                    <div class="col-md-3 col-lg-2 col-xl-2 mx-auto mb-4">
                        <!-- Links -->
                        <h6 class="text-uppercase fw-bold mb-4">
                            Contact
                        </h6>
                        <i class="fas fa-home"></i> Mjörnvägen 1
                        <i class="fas fa-home"></i> 443 73 Björboholm
                        <i class="fas fa-envelope"></i>info@example.com
                        
                    </div>
                    <div class="col-md-2 text-end">
                        <!-- Logo -->
                        <MudImage Src="images/logo.webp" Alt="Company Logo" Class="img-fluid me-2" style="height: 150px;"></MudImage>
                    </div>
                </div>
                <!-- Grid row --> 
            </div>
        </section>
        <!-- Section: Links  -->
        <!-- Copyright -->
        <div class="text-center p-2" style="background-color: rgba(0, 0, 0, 0.05);">
            © 2025 Copyright:
            <a class="text-reset fw-bold" href="/">Record Store</a>
        </div>
        <!-- Copyright -->
    </footer>
    <!-- Footer -->

</div>



@code {

    List<ProductDTO> products = new();
    List<ProductDTO> filteredProducts = new();
    List<ProductDTO> shoppingCartItems = new();

    public static string selectedContent = "Products";
    //public static string selectedContent { get; set; }

    public static void SelectContent(string option)
    {
        selectedContent = option;
        
    }



    // Cart
    private bool _open;
    private void ToggleOpen() => _open = !_open;

    private void CheckOut()
    {

    }

    protected override async Task OnInitializedAsync()
    {
        var item1 = new ProductDTO { Artist = "Iron Maiden", AlbumTitle = "Live after death", Price = 199 };
        var item2 = new ProductDTO { Artist = "Black Sabbath", AlbumTitle = "S/T", Price = 299 };
        var item3 = new ProductDTO { Artist = "Angel Witch",  AlbumTitle = "S/T", Price = 99 };



        shoppingCartItems.Add(item1);
        shoppingCartItems.Add(item2);
        shoppingCartItems.Add(item3);

    }

    void UpdateFilteredProducts(string searchTerm)
    {

    }
}
